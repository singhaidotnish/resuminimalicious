<style>
    .carousel-wrapper {
        width: 100%;
        min-height: 100vh;
        background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
        padding: 4rem 1rem;
        overflow: hidden;
    }

    .carousel-container {
        max-width: 1400px;
        margin: 0 auto;
    }

    .carousel-header {
        text-align: center;
        margin-bottom: 3rem;
    }

    .carousel-header h1 {
        font-size: 3.5rem;
        font-weight: 700;
        color: white;
        margin-bottom: 1rem;
        text-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    }

    .carousel-header p {
        font-size: 1.25rem;
        color: #c4b5fd;
    }

    .stage-container {
        position: relative;
        height: 600px;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-bottom: 3rem;
        perspective: 2000px;
    }

    .stage {
        position: relative;
        width: 100%;
        height: 100%;
        transform-style: preserve-3d;
    }

    .card-wrapper {
        position: absolute;
        width: 380px;
        height: 480px;
        transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        left: 50%;
        top: 50%;
        margin-left: -190px;
        margin-top: -240px;
    }

    .project-card {
        position: relative;
        width: 100%;
        height: 100%;
        border-radius: 1rem;
        overflow: hidden;
        box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
        transition: all 0.3s ease;
        backdrop-filter: blur(10px);
    }

    .card-wrapper.center .project-card {
        box-shadow: 0 0 0 4px #a78bfa, 0 30px 60px -12px rgba(0, 0, 0, 0.6);
    }

    .project-image {
        position: relative;
        height: 256px;
        overflow: hidden;
        background: #1f2937;
    }

    .project-image img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.3s ease;
    }

    .card-wrapper.center .project-image img {
        transform: scale(1.05);
    }

    .external-link {
        position: absolute;
        top: 1rem;
        right: 1rem;
        background: rgba(255, 255, 255, 0.9);
        padding: 0.5rem;
        border-radius: 50%;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        transition: all 0.2s ease;
        text-decoration: none;
        display: none;
    }

    .card-wrapper.center .external-link {
        display: block;
    }

    .external-link:hover {
        background: white;
        transform: scale(1.1);
    }

    .external-link svg {
        width: 20px;
        height: 20px;
        display: block;
    }

    .project-info {
        padding: 1.5rem;
        background: rgba(17, 24, 39, 0.8);
        backdrop-filter: blur(10px);
    }

    .project-name {
        font-size: 1.5rem;
        font-weight: 700;
        color: white;
        margin-bottom: 0.75rem;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }

    .project-description {
        color: #d1d5db;
        line-height: 1.6;
    }

    .featured-badge {
        display: none;
        margin-top: 1rem;
    }

    .card-wrapper.center .featured-badge {
        display: flex;
        gap: 0.5rem;
    }

    .badge {
        padding: 0.25rem 0.75rem;
        background: rgba(168, 85, 247, 0.3);
        color: #ddd6fe;
        border-radius: 9999px;
        font-size: 0.875rem;
    }

    .nav-button {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(10px);
        padding: 1rem;
        border-radius: 50%;
        border: none;
        cursor: pointer;
        transition: all 0.2s ease;
        z-index: 100;
    }

    .nav-button:hover:not(:disabled) {
        background: rgba(255, 255, 255, 0.2);
        transform: translateY(-50%) scale(1.1);
    }

    .nav-button:disabled {
        opacity: 0.5;
        cursor: not-allowed;
    }

    .nav-button svg {
        width: 32px;
        height: 32px;
        color: white;
        display: block;
    }

    .nav-button.prev {
        left: 2rem;
    }

    .nav-button.next {
        right: 2rem;
    }

    .dot-navigation {
        display: flex;
        justify-content: center;
        gap: 0.75rem;
        margin-bottom: 2rem;
    }

    .dot {
        width: 12px;
        height: 12px;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.3);
        border: none;
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .dot:hover:not(:disabled) {
        background: rgba(255, 255, 255, 0.5);
    }

    .dot.active {
        width: 48px;
        height: 12px;
        border-radius: 6px;
        background: #a78bfa;
    }

    .dot:disabled {
        cursor: not-allowed;
    }

    .controls {
        text-align: center;
    }

    .auto-rotate-button {
        padding: 0.75rem 1.5rem;
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(10px);
        color: white;
        border: none;
        border-radius: 9999px;
        cursor: pointer;
        transition: all 0.2s ease;
        font-size: 1rem;
    }

    .auto-rotate-button:hover {
        background: rgba(255, 255, 255, 0.2);
        transform: scale(1.05);
    }

    .project-counter {
        text-align: center;
        margin-top: 2rem;
        color: rgba(255, 255, 255, 0.7);
        font-size: 1.125rem;
    }

    .project-counter .current {
        font-weight: 700;
        color: #a78bfa;
    }

    .project-counter .total {
        font-weight: 700;
    }

    @media (max-width: 768px) {
        .carousel-header h1 {
            font-size: 2.5rem;
        }

        .stage-container {
            height: 500px;
        }

        .card-wrapper {
            width: 320px;
            height: 400px;
            margin-left: -160px;
            margin-top: -200px;
        }

        .project-image {
            height: 180px;
        }

        .nav-button {
            padding: 0.75rem;
        }

        .nav-button svg {
            width: 24px;
            height: 24px;
        }

        .nav-button.prev {
            left: 1rem;
        }

        .nav-button.next {
            right: 1rem;
        }
    }
</style>

<div class="carousel-wrapper">
    <div class="carousel-container">
        <!-- Header -->
        <div class="carousel-header">
            <h1>Projects Gallery</h1>
            <p>Explore my portfolio in 3D</p>
        </div>

        <!-- Carousel Stage -->
        <div class="stage-container">
            <div class="stage" id="stage"></div>

            <!-- Navigation Buttons -->
            <button class="nav-button prev" id="prevBtn" aria-label="Previous project">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
                </svg>
            </button>

            <button class="nav-button next" id="nextBtn" aria-label="Next project">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                </svg>
            </button>
        </div>

        <!-- Dot Navigation -->
        <div class="dot-navigation" id="dotNav"></div>

        <!-- Controls -->
        <div class="controls">
            <button class="auto-rotate-button" id="autoRotateBtn">
                ⏸ Pause Auto-Rotate
            </button>
        </div>

        <!-- Project Counter -->
        <div class="project-counter">
            <p>
                Project <span class="current" id="currentNum">1</span> 
                of <span class="total" id="totalNum">8</span>
            </p>
        </div>
    </div>
</div>

<script>
    // Project data
    const projects = [
        {
            name: "neo-titanium-mp",
            image: "/assets/projects/neo-titanium-mp.png",
            description: "Monorepo scaffold for modern pipelines / MP utilities.",
            url: "https://zarir-engineer.github.io/neo-titanium-global-enery/",
            color: "#4A90E2"
        },
        {
            name: "aipyqtfylicious",
            image: "/assets/projects/aipyqtfylicious.png",
            description: "AI‑infused PyQt toolkit and sample apps.",
            url: "#",
            color: "#E24A4A"
        },
        {
            name: "varsity-audio-monorepo",
            image: "/assets/projects/varsity-audio-monorepo.png",
            description: "Varsity chapters → scrape, TTS, upload pipeline.",
            url: "https://varsity-audio-monorepo-frontend.onrender.com",
            color: "#50C878"
        },
        {
            name: "minimalgotronifylicious",
            image: "/assets/projects/minimalgotronifylicious.png",
            description: "Minimal, AI‑ready monorepo with docs & scripts.",
            url: "#",
            color: "#9B59B6"
        },
        {
            name: "hyperfotopixelicious",
            image: "/assets/projects/hyperfotopixelicious.png",
            description: "Imaging & VFX experiments, tools, and pipelines.",
            url: "#",
            color: "#F39C12"
        },
        {
            name: "newtabfirefoxylicious",
            image: "/assets/projects/newtabfirefoxylicious.jpg",
            description: "Custom new‑tab experiments for Firefox.",
            url: "https://singhaidotnish.github.io/newtabfirefoxylicious/",
            color: "#E67E22"
        },
        {
            name: "dm-mindmap",
            image: "/assets/projects/solar-system.jpg",
            description: "3D mindmap visualization tool",
            url: "#",
            color: "#1ABC9C"
        },
        {
            name: "TubeSidecarificity",
            image: "/assets/projects/tubesidecarificity.png",
            description: "YouTube sidecar tools: local ffmpeg, metadata, MP3.",
            url: "#",
            color: "#34495E"
        }
    ];

    // State
    let currentIndex = 0;
    let isAnimating = false;
    let autoRotate = true;
    let autoRotateInterval;

    const stage = document.getElementById('stage');
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    const autoRotateBtn = document.getElementById('autoRotateBtn');
    const dotNav = document.getElementById('dotNav');
    const currentNum = document.getElementById('currentNum');
    const totalNum = document.getElementById('totalNum');

    // Initialize
    function init() {
        totalNum.textContent = projects.length;
        createCards();
        createDots();
        updateCarousel();
        startAutoRotate();
    }

    // Create project cards
    function createCards() {
        projects.forEach((project, index) => {
            const wrapper = document.createElement('div');
            wrapper.className = 'card-wrapper';
            wrapper.dataset.index = index;

            const card = document.createElement('div');
            card.className = 'project-card';
            card.style.background = `linear-gradient(135deg, ${project.color}20, ${project.color}40)`;

            card.innerHTML = `
                <div class="project-image">
                    <img src="${project.image}" alt="${project.name}" 
                         onerror="this.src='data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 width=%22400%22 height=%22300%22%3E%3Crect fill=%22%23333%22 width=%22400%22 height=%22300%22/%3E%3Ctext fill=%22%23666%22 x=%2250%25%22 y=%2250%25%22 text-anchor=%22middle%22 dy=%22.3em%22%3EProject%3C/text%3E%3C/svg%3E'">
                    ${project.url !== '#' ? `
                        <a href="${project.url}" target="_blank" rel="noopener noreferrer" class="external-link">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
                            </svg>
                        </a>
                    ` : ''}
                </div>
                <div class="project-info">
                    <h3 class="project-name">${project.name}</h3>
                    <p class="project-description">${project.description}</p>
                    <div class="featured-badge">
                        <span class="badge">Featured</span>
                    </div>
                </div>
            `;

            wrapper.appendChild(card);
            stage.appendChild(wrapper);
        });
    }

    // Create dot navigation
    function createDots() {
        projects.forEach((_, index) => {
            const dot = document.createElement('button');
            dot.className = 'dot';
            dot.dataset.index = index;
            dot.setAttribute('aria-label', `Go to project ${index + 1}`);
            dot.addEventListener('click', () => goToSlide(index));
            dotNav.appendChild(dot);
        });
    }

    // Calculate card position and style
    function getCardStyle(index) {
        const diff = ((index - currentIndex + projects.length) % projects.length);
        const angle = (360 / projects.length) * diff;
        const radius = 450;
        
        const x = Math.sin((angle * Math.PI) / 180) * radius;
        const z = Math.cos((angle * Math.PI) / 180) * radius - radius;
        
        let scale = 1;
        let opacity = 1;
        let zIndex = 0;
        
        if (diff === 0) {
            scale = 1.2;
            opacity = 1;
            zIndex = 10;
        } else if (diff === 1 || diff === projects.length - 1) {
            scale = 0.85;
            opacity = 0.7;
            zIndex = 5;
        } else if (diff === 2 || diff === projects.length - 2) {
            scale = 0.65;
            opacity = 0.4;
            zIndex = 3;
        } else {
            scale = 0.5;
            opacity = 0.2;
            zIndex = 1;
        }

        return {
            transform: `translateX(${x}px) translateZ(${z}px) rotateY(${-angle}deg) scale(${scale})`,
            opacity,
            zIndex,
            pointerEvents: diff === 0 ? 'auto' : 'none'
        };
    }

    // Update carousel position
    function updateCarousel() {
        const cards = document.querySelectorAll('.card-wrapper');
        
        cards.forEach((card, index) => {
            const style = getCardStyle(index);
            card.style.transform = style.transform;
            card.style.opacity = style.opacity;
            card.style.zIndex = style.zIndex;
            card.style.pointerEvents = style.pointerEvents;
            
            if (((index - currentIndex + projects.length) % projects.length) === 0) {
                card.classList.add('center');
            } else {
                card.classList.remove('center');
            }
        });

        // Update dots
        document.querySelectorAll('.dot').forEach((dot, index) => {
            if (index === currentIndex) {
                dot.classList.add('active');
            } else {
                dot.classList.remove('active');
            }
        });

        // Update counter
        currentNum.textContent = currentIndex + 1;
    }

    // Navigation functions
    function handleNext() {
        if (isAnimating) return;
        isAnimating = true;
        currentIndex = (currentIndex + 1) % projects.length;
        updateCarousel();
        setTimeout(() => { isAnimating = false; }, 600);
    }

    function handlePrev() {
        if (isAnimating) return;
        isAnimating = true;
        currentIndex = (currentIndex - 1 + projects.length) % projects.length;
        updateCarousel();
        setTimeout(() => { isAnimating = false; }, 600);
    }

    function goToSlide(index) {
        if (isAnimating || index === currentIndex) return;
        isAnimating = true;
        currentIndex = index;
        autoRotate = false;
        stopAutoRotate();
        updateAutoRotateButton();
        updateCarousel();
        setTimeout(() => { isAnimating = false; }, 600);
    }

    // Auto-rotate functions
    function startAutoRotate() {
        if (autoRotateInterval) clearInterval(autoRotateInterval);
        autoRotateInterval = setInterval(handleNext, 4000);
    }

    function stopAutoRotate() {
        if (autoRotateInterval) {
            clearInterval(autoRotateInterval);
            autoRotateInterval = null;
        }
    }

    function toggleAutoRotate() {
        autoRotate = !autoRotate;
        if (autoRotate) {
            startAutoRotate();
        } else {
            stopAutoRotate();
        }
        updateAutoRotateButton();
    }

    function updateAutoRotateButton() {
        autoRotateBtn.textContent = autoRotate ? '⏸ Pause Auto-Rotate' : '▶ Resume Auto-Rotate';
    }

    // Event listeners
    prevBtn.addEventListener('click', handlePrev);
    nextBtn.addEventListener('click', handleNext);
    autoRotateBtn.addEventListener('click', toggleAutoRotate);

    stage.addEventListener('mouseenter', () => {
        if (autoRotate) stopAutoRotate();
    });

    stage.addEventListener('mouseleave', () => {
        if (autoRotate) startAutoRotate();
    });

    // Keyboard navigation
    document.addEventListener('keydown', (e) => {
        if (e.key === 'ArrowLeft') handlePrev();
        if (e.key === 'ArrowRight') handleNext();
    });

    // Initialize carousel
    init();
</script>
